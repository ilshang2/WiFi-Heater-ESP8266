# WiFi-Heater-ESP8266

## 專案概述
WiFi-Heater-ESP8266 是基於 ESP8266 平台的智能熱水器控制系統。本專案旨在實現遠程控制、智能化管理熱水器的目標，結合溫度感測器、自動化控制邏輯以及 WiFi 網路，使得用戶能夠通過網路隨時監控並調節熱水器的運行狀態，實現節能高效的生活方式。

本專案具有多模式選擇（手動、自動調溫及定時控制），並支援使用者自行設定目標水溫及定時運行參數。透過網路介面，用戶還可以查詢當前水溫及加熱狀態，並配置相應的加熱參數。

## 功能
- **手動控制加熱器**：用戶可通過 Web 伺服器或實體開關來手動控制加熱器開關。
- **自動目標水溫調整**：根據環境溫度，系統可自動調整熱水器的目標水溫，確保高效運行。
- **定時加熱模式**：設定每日特定時間段進行加熱，避免不必要的耗能。
- **遠程監控與管理**：用戶可透過網頁瀏覽器或移動設備監控加熱器的運行狀況及剩餘時間。
- **溫度與濕度監測**：透過 DHT11 感測器監控環境溫度與濕度，並調整加熱器的運行。

## 系統架構
### 硬體組件
- **ESP8266 (NodeMCU v2)**：作為控制主機，負責執行程式邏輯和與 WiFi 的連線。
- **DHT11 感測器**：用於測量環境的溫度和濕度（包括環境與水溫的監測）。
- **繼電器模組**：控制熱水器的供電。
- **電源供應模組**：為 ESP8266 和感測器提供穩定的電力。

### 系統架構圖
```
WiFi-Heater-ESP8266 系統架構圖：
ESP8266 (NodeMCU v2) <--> 繼電器模組 <--> 熱水器
       |
       +--> DHT11 感測器 (測量環境溫濕度和水溫)
```

### 主要邏輯流程
1. **系統啟動**：ESP8266 上電後連接到 WiFi，獲取當前時間及進行初始溫度讀取。
2. **感測器讀取**：每隔 10 秒鐘讀取 DHT11 溫濕度數據並進行處理。
3. **控制策略**：
   - **手動模式**：用戶通過開關或 Web 界面直接控制加熱器。
   - **自動調溫模式**：根據環境溫度自動調節水溫。
   - **定時模式**：在設定的時間段內自動啟動或停止加熱。
4. **遠程監控**：系統通過網頁伺服器介面顯示加熱器當前狀態、剩餘加熱時間及環境數據。

## 接線圖
### 接線說明
- **ESP8266 NodeMCU v2**：
  - **DHT11 感測器**：
    - VCC 連接到 3.3V (ESP8266)
    - GND 連接到 GND (ESP8266)
    - DATA 連接到 GPIO4 或 GPIO5 (ESP8266)
  - **繼電器模組**：
    - **IN1** 連接到 GPIO14 (控制加熱器開關)
    - **VCC** 連接到 5V 電源
    - **GND** 連接到 GND (ESP8266)
  - **電源供應**：
    - ESP8266 通過 USB 或外部 5V 電源供電。

## 安裝與配置
1. **克隆專案**：
   ```bash
   git clone https://github.com/yourusername/WiFi-Heater-ESP8266.git
   cd WiFi-Heater-ESP8266
   ```

2. **配置檔案編輯**：
   修改 `hwater.yaml` 配置檔案：
   - 設定 WiFi 名稱和密碼
   - 修改 OTA 密碼以確保安全性

3. **燒錄至 ESP8266**：
   使用 ESPHome 燒錄配置到 ESP8266：
   ```bash
   esphome run hwater.yaml
   ```

4. **部署與測試**：
   - 上電後 ESP8266 會嘗試連接 WiFi。
   - 成功後，可透過 `http://[ESP8266 IP 地址]:80` 訪問 Web 介面進行監控和操作。

## 使用說明
- **手動模式**：可以通過 Web 界面的開關控制熱水器的狀態。
- **自動調溫模式**：透過啟動 `Auto Target Temperature Adjustment` 功能，系統根據環境溫度自動調整目標水溫。
- **定時模式**：啟用 `Enable Timer Mode` 並設定 `Timer Start Hour` 及 `Timer End Hour`，系統將在設定時間內自動運行。

## 圖示與介面
![image](https://github.com/user-attachments/assets/3c0b0a3f-1359-400a-baf9-1c5412ee46ce)


## 注意事項
- **安全用電**：請確保接線正確且安全，以避免因不當接線造成的短路或觸電。
- **溫度調整**：若環境溫度變化大，請謹慎使用自動調溫功能，以免頻繁啟停影響加熱器壽命。

## 常見問題
### Q1：如何連接到熱水器？
A1：請參考上述接線圖。繼電器的 NO（常開）端應連接到熱水器電源控制回路中。

### Q2：如何重置 WiFi 設定？
A2：可以通過重燒錄新配置檔案來更改 WiFi SSID 和密碼。

## 貢獻方式
歡迎各位愛好者參與此專案！你可以：
- 透過 GitHub Issues 反饋 Bug 或提出新功能建議。
- Fork 專案並發送 Pull Request 來改進程式碼。

## 授權
此專案採用 [MIT License](LICENSE) 進行授權，歡迎自由修改與分發。

## 聯絡
如有任何問題或建議，請通過 GitHub 上的 Issues 與我聯繫。
